<!–– Simple program to display Cellular Automaton Rule 150 and TM modeling.
Written by: Alexandria Wolfram - aleewolfram@csu.fullerton.edu––>

<html>
    <head>
<h1><font color= #581845>Team AJA - TM Cella Rule 150</font></h1>
    </head>
<button type="button" onClick="onClick()">Click me</button>
<button type="button2" onClick="autoClick()">Auto Run</button>
<p>Clicks: <a id="clicks">0</a></p>
<body style="background-color: #F9C6E3;">
        <canvas id="canvas" width="410px" height="200px" style="background: #fff; magrin:400px;"></canvas>
        <script type="text/javascript" language="javascript">

          var clicks = 0;
          function onClick() {
            clicks += 1;
            document.getElementById("clicks").innerHTML = clicks;
            draw();

              if(clicks == 164)
              {
                clearInterval(refreshIntervalId);
              }
            };

            function autoClick() //auto clicker runs forever, need to fix
            {
              var refreshIntervalId = setInterval(onClick, 1000);
            }

        /* function that creates a matrix
           function was created with help of Stack Overflow answer by Matthew Crumley
         link: https://stackoverflow.com/questions/966225/how-can-i-create-a-two-dimensional-array-in-javascript */
        function createMatrix(length)
        {
              var array = new Array(length || 0), y = length;

              if (arguments.length > 1)
              {
                  var argument = Array.prototype.slice.call(arguments, 1);
                  while(y-- != 0)
                  {
                    array[length-1 - y] = createMatrix.apply(this, argument);
                  }
              }

              return array;
          }

          // creates a multi dimentional array of size 400x400
          var SIZE2 = 41;
          var SIZE = 20;
          var matrix = createMatrix(SIZE, SIZE2);

          // initializes the first row
          for(var i = 0; i < SIZE2; i++)
          {
            if(i != 20)
            {
              matrix[0][i] = 0;
            }
            else
            {
              matrix[0][i] = 1;
            }
          }
          for(i = 1; i < SIZE; i++) // for down
          {
            for(var j = 0; j < SIZE2; j++) //for across
            {
              if(j==0)
              {
                //special case for left edge cells
                if(matrix[i-1][j]==1 && matrix[i-1][j+1]==1)//rule 5
                  matrix[i][j]=0;
                if(matrix[i-1][j]==1 && matrix[i-1][j+1]==0)//rule 6
                  matrix[i][j]=1;
                if(matrix[i-1][j]==0 && matrix[i-1][j+1]==1)//rule 7
                  matrix[i][j]=1;
                if(matrix[i-1][j]==0 && matrix[i-1][j+1]==0)//rule 8
                  matrix[i][j]=0;
              }
              else if(j==(SIZE2-1))
              {
                //special case for right edge cells
                if(matrix[i-1][j-1]==1 && matrix[i-1][j]==1)//rule 2
                  matrix[i][j]=0;
                if(matrix[i-1][j-1]==1 && matrix[i-1][j]==0)//rule 4
                  matrix[i][j]=1;
                if(matrix[i-1][j-1]==0 && matrix[i-1][j]==1)//rule 6
                  matrix[i][j]=1;
                if(matrix[i-1][j-1]==0 && matrix[i-1][j]==0)//rule 8
                  matrix[i][j]=0;
              }
              else
              {
                //for all non-edge cells
                if(matrix[i-1][j-1]==1 && matrix[i-1][j]==1 && matrix[i-1][j+1]==1)//rule 1
                  matrix[i][j]=1;
                if(matrix[i-1][j-1]==1 && matrix[i-1][j]==1 && matrix[i-1][j+1]==0)//rule 2
                  matrix[i][j]=0;
                if(matrix[i-1][j-1]==1 && matrix[i-1][j]==0 && matrix[i-1][j+1]==1)//rule 3
                  matrix[i][j]=0;
                if(matrix[i-1][j-1]==1 && matrix[i-1][j]==0 && matrix[i-1][j+1]==0)//rule 4
                  matrix[i][j]=1;
                if(matrix[i-1][j-1]==0 && matrix[i-1][j]==1 && matrix[i-1][j+1]==1)//rule 5
                  matrix[i][j]=0;
                if(matrix[i-1][j-1]==0 && matrix[i-1][j]==1 && matrix[i-1][j+1]==0)//rule 6
                  matrix[i][j]=1;
                if(matrix[i-1][j-1]==0 && matrix[i-1][j]==0 && matrix[i-1][j+1]==1)//rule 7
                  matrix[i][j]=1;
                if(matrix[i-1][j-1]==0 && matrix[i-1][j]==0 && matrix[i-1][j+1]==0)//rule 8
                  matrix[i][j]=0;
              }
            }
          }



          //function that draws the matrix on the canvas
          function draw()
          {
            var canvas = document.getElementById('canvas');
            var ctx = canvas.getContext("2d");
            //ctx.clearRect(0, 0, 410, 200); // clear canvas
          //  ctx.fillRect((10), (10), 10, 10);
          var counter = 0;
            for(var i = 0; i < 20; i++)
            {
              for(var j = 0; j < 41; j++)
              {

                var x = i * 10;
                var y = j;
                if(j > 0)
                {
                  y=j*10;
                }

                if(matrix[i][j] == 1 && counter < clicks)
                {
                      console.log("Filling: " + i + " " +j +" Counter =" + counter + "Clicks =" + clicks);
                    ctx.fillRect(y, x, 10, 10);
                    counter++;
                }

              }
            }

      }



    </script>
    </body>
    </html>
